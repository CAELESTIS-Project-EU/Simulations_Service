{% extends './dashboard.html' %}
<script>
    function copyToClipboard(element) {
          var $temp = $("<input>");
          $("body").append($temp);
          $temp.val($(element).text()).select();
          document.execCommand("copy");
          $temp.remove();
        }
</script>
{% block dashboard %}
    {% if user.is_authenticated %}
        <div class="card" style="border-radius: 15px;">
            <div class="card-body p-5">
                <h2 class="text-center mb-5" style="text-decoration: underline;">
                           <button type="button" class="btn btn-primary btn-xl" disabled>API authentication
                    </button>
                </h2>
                <div class="wrapper-create-work">

                {% if token %}
                    <script>
                            function copyToClipboard(element) {
                                  var $temp = $("<input>");
                                  $("body").append($temp);
                                  $temp.val($(element).text()).select();
                                  document.execCommand("copy");
                                  $temp.remove();
                                }
                        </script>
                        <button hidden id="p1" >{{token}}</button>
                        <input disabled type="text" class="form-control"   id="tokenValue" value={{token}}>
                        <label for="floatingInputValue">Your Token</label>
                        <br><br>
                        <button class="btn btn-secondary"  onclick="copyToClipboard('#p1')" > Click to copy your token</button>
                        <br><br>
                        <a href="/dashboard"><button type="button" class="btn btn-success">Continue</button></a>

                {% else %}
                    <form method="POST">
                        {% csrf_token %}
                        <button type="submit" name=""
                                class="btn btn-primary">Generate token
                        </button>
                    </form>
                {% endif %}
                </div>
            </div>
        </div>
    {% else %}
        <div class="wrapper">
            <h2>CAELESTIS</h2>
            <h4>Login and Register</h4>
        </div>
    {% endif %}
{% endblock %}

