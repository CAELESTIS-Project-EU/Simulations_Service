{% extends './dashboard.html' %}

{% block dashboard %}
    {% if user.is_authenticated %}
        <div class="card" style="border-radius: 15px;">
            <div class="card-body p-5">
                <h2 class="text-center mb-5" style="text-decoration: underline;">
                    <button type="button" class="btn btn-primary btn-xl" disabled>EXECUTION INFO</button>
                </h2>
                <div class="wrapper-create-work">
                    <script>
                        function copyToClipboard(element) {
                            var $temp = $("<input>");
                            $("body").append($temp);
                            $temp.val($(element).text()).select();
                            document.execCommand("copy");
                            $temp.remove();
                        }
                    </script>

                    <p class="h4" style="text-align: center">Pending executions:</p>
                    <table class="table">
                        <thead>
                        <tr style="text-align: center">
                            <th scope="col">JobID</th>
                            <th scope="col">User</th>
                            <th scope="col">Nodes</th>
                            <th scope="col">Status</th>
                            <th scope="col">Time</th>
                            <th scope="col">Queue</th>
                            <th scope="col">Checkpoint</th>
                            <th scope="col">Autorestart</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr style="text-align: center">
                            <td>{{ executionInfo.jobID }}</td>
                            <td>{{ executionInfo.user }}</td>
                            <td>{{ executionInfo.nodes }}</td>
                            <td>{{ executionInfo.status }}</td>
                            <td>{{ executionInfo.time }}</td>
                            <td>{{ executionInfo.qos }}</td>
                            <td>{{ executionInfo.checkpointBool }}</td>
                            <td>{{ executionInfo.autorestart }}</td>
                        </tr>

                        </tbody>
                    </table>
                    <button class="btn btn-secondary" onclick="copyToClipboard('#p2')"> Click to copy the working directory
                        path!
                    </button>
                    <button id="p2" hidden> {{ executionInfo.wdir }}</button>
                </div>
            </div>
        </div>
    {% else %}
        <div class="wrapper">
            <h2>CAELESTIS</h2>
            <h4>Login and Register</h4>
        </div>
    {% endif %}
{% endblock %}